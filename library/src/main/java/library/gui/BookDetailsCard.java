/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package library.gui;

import library.controller.ItemUseCases;

/** Card for entering details of new book item
 *
 * @author Ben Rogers and Lucas DeAssis
 */
public class BookDetailsCard extends javax.swing.JPanel {

  /**
   * Creates new form BookDetailsCard
   */
  public BookDetailsCard() {
    initComponents();
  }

  /**
   * This method is called from within the constructor to initialize the form.
   * WARNING: Do NOT modify this code. The content of this method is always
   * regenerated by the Form Editor.
   */
  @SuppressWarnings("unchecked")
  // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
  private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    cancelButton = new javax.swing.JButton();
    addBookButton = new javax.swing.JButton();
    callNumberLabel = new javax.swing.JLabel();
    callNumberField = new javax.swing.JTextField();
    titleLabel = new javax.swing.JLabel();
    authorLabel = new javax.swing.JLabel();
    titleField = new javax.swing.JTextField();
    authorField = new javax.swing.JTextField();

    setLayout(new java.awt.GridBagLayout());

    cancelButton.setText("Cancel");
    cancelButton.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        cancelButtonActionPerformed(evt);
      }
    });
    cancelButton.addKeyListener(new java.awt.event.KeyAdapter() {
      public void keyPressed(java.awt.event.KeyEvent evt) {
        cancelButtonKeyPressed(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 6;
    gridBagConstraints.gridwidth = 3;
    gridBagConstraints.ipadx = 13;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(81, 23, 41, 0);
    add(cancelButton, gridBagConstraints);

    addBookButton.setText("Add Book");
    addBookButton.setEnabled(false);
    addBookButton.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        addBookButtonActionPerformed(evt);
      }
    });
    addBookButton.addKeyListener(new java.awt.event.KeyAdapter() {
      public void keyPressed(java.awt.event.KeyEvent evt) {
        addBookButtonKeyPressed(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 6;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(81, 107, 41, 0);
    add(addBookButton, gridBagConstraints);

    callNumberLabel.setText("Call Number:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.gridwidth = 4;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(44, 23, 0, 0);
    add(callNumberLabel, gridBagConstraints);

    callNumberField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        callNumberFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(40, 107, 0, 22);
    add(callNumberField, gridBagConstraints);

    titleLabel.setText("Title:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(22, 23, 0, 0);
    add(titleLabel, gridBagConstraints);

    authorLabel.setText("Author:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 4;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(24, 23, 0, 0);
    add(authorLabel, gridBagConstraints);

    titleField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        titleFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(22, 107, 0, 22);
    add(titleField, gridBagConstraints);

    authorField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        authorFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 4;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(20, 107, 0, 22);
    add(authorField, gridBagConstraints);
  }// </editor-fold>//GEN-END:initComponents

  private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
    clear();
    ItemUseCases.getInstance().cancel();
    GUI.getInstance().goBack();
  }//GEN-LAST:event_cancelButtonActionPerformed

  private void cancelButtonKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cancelButtonKeyPressed
    if (evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) {
      cancelButtonActionPerformed(null);
    }
  }//GEN-LAST:event_cancelButtonKeyPressed

  private void addBookButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addBookButtonActionPerformed
    try {
      String callNumber = callNumberField.getText();
      String title = titleField.getText();
      String author = authorField.getText();
      ItemUseCases.getInstance().addItem(callNumber, title, author);
      GUI.getInstance().showMessage("Book added successfully!");
    } catch (IllegalArgumentException e) {
      GUI.getInstance().showMessage(e.getMessage());
    }
    clear();
  }//GEN-LAST:event_addBookButtonActionPerformed

  private void addBookButtonKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_addBookButtonKeyPressed
    if (evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) {
      addBookButtonActionPerformed(null);
    }
  }//GEN-LAST:event_addBookButtonKeyPressed

  private void callNumberFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_callNumberFieldCaretUpdate
    addBookButton.setEnabled(isAddBookEnabled());
  }//GEN-LAST:event_callNumberFieldCaretUpdate

  private void titleFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_titleFieldCaretUpdate
    addBookButton.setEnabled(isAddBookEnabled());
  }//GEN-LAST:event_titleFieldCaretUpdate

  private void authorFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_authorFieldCaretUpdate
    addBookButton.setEnabled(isAddBookEnabled());
  }//GEN-LAST:event_authorFieldCaretUpdate

  // Helper function to enable addBookButton
  private boolean isAddBookEnabled() {
    return callNumberField.getText().length() > 0 &&
           titleField.getText().length() > 0 &&
           authorField.getText().length() > 0;
  }
  
  /** Clears all fields in the card
   */
  private void clear() {
    callNumberField.setText("");
    titleField.setText("");
    authorField.setText("");
  }

  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JButton addBookButton;
  private javax.swing.JTextField authorField;
  private javax.swing.JLabel authorLabel;
  private javax.swing.JTextField callNumberField;
  private javax.swing.JLabel callNumberLabel;
  private javax.swing.JButton cancelButton;
  private javax.swing.JTextField titleField;
  private javax.swing.JLabel titleLabel;
  // End of variables declaration//GEN-END:variables
}
