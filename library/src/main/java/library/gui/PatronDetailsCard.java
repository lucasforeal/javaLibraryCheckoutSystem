/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package library.gui;

import library.controller.PatronUseCases;

/** Card for entering the data of a new patron
 *
 * @author Ben Rogers
 */
public class PatronDetailsCard extends javax.swing.JPanel {

  /**
   * Creates new form PatronDetailsCard
   */
  public PatronDetailsCard() {
    initComponents();
  }

  /**
   * This method is called from within the constructor to initialize the form.
   * WARNING: Do NOT modify this code. The content of this method is always
   * regenerated by the Form Editor.
   */
  // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
  private void initComponents() {
    java.awt.GridBagConstraints gridBagConstraints;

    cancelButton = new javax.swing.JButton();
    addPatronButton = new javax.swing.JButton();
    firstNameLabel = new javax.swing.JLabel();
    firstNameField = new javax.swing.JTextField();
    lastNameLabel = new javax.swing.JLabel();
    addressLabel = new javax.swing.JLabel();
    phoneNumberLabel = new javax.swing.JLabel();
    lastNameField = new javax.swing.JTextField();
    addressField = new javax.swing.JTextField();
    phoneNumberField = new javax.swing.JTextField();

    setLayout(new java.awt.GridBagLayout());

    cancelButton.setText("Cancel");
    cancelButton.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        cancelButtonActionPerformed(evt);
      }
    });
    cancelButton.addKeyListener(new java.awt.event.KeyAdapter() {
      public void keyPressed(java.awt.event.KeyEvent evt) {
        cancelButtonKeyPressed(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 8;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(33, 26, 39, 0);
    add(cancelButton, gridBagConstraints);

    addPatronButton.setText("Add Patron");
    addPatronButton.setEnabled(false);
    addPatronButton.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
        addPatronButtonActionPerformed(evt);
      }
    });
    addPatronButton.addKeyListener(new java.awt.event.KeyAdapter() {
      public void keyPressed(java.awt.event.KeyEvent evt) {
        addPatronButtonKeyPressed(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 8;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(33, 71, 39, 0);
    add(addPatronButton, gridBagConstraints);

    firstNameLabel.setText("First Name:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.gridwidth = 3;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(46, 26, 0, 0);
    add(firstNameLabel, gridBagConstraints);

    firstNameField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        firstNameFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 0;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(42, 71, 0, 41);
    add(firstNameField, gridBagConstraints);

    lastNameLabel.setText("Last Name:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.gridwidth = 3;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(22, 26, 0, 0);
    add(lastNameLabel, gridBagConstraints);

    addressLabel.setText("Address:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 4;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(28, 26, 0, 0);
    add(addressLabel, gridBagConstraints);

    phoneNumberLabel.setText("Phone Number:");
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 0;
    gridBagConstraints.gridy = 6;
    gridBagConstraints.gridwidth = 4;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(28, 26, 0, 0);
    add(phoneNumberLabel, gridBagConstraints);

    lastNameField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        lastNameFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 2;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(18, 71, 0, 41);
    add(lastNameField, gridBagConstraints);

    addressField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        addressFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 4;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(24, 71, 0, 41);
    add(addressField, gridBagConstraints);

    phoneNumberField.addCaretListener(new javax.swing.event.CaretListener() {
      public void caretUpdate(javax.swing.event.CaretEvent evt) {
        phoneNumberFieldCaretUpdate(evt);
      }
    });
    gridBagConstraints = new java.awt.GridBagConstraints();
    gridBagConstraints.gridx = 4;
    gridBagConstraints.gridy = 6;
    gridBagConstraints.gridwidth = 2;
    gridBagConstraints.gridheight = 2;
    gridBagConstraints.ipadx = 160;
    gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
    gridBagConstraints.insets = new java.awt.Insets(24, 71, 0, 41);
    add(phoneNumberField, gridBagConstraints);
  }// </editor-fold>//GEN-END:initComponents
  
  // Helper function to enable addPatronButton
  private boolean isAddPatronEnabled() {
    return firstNameField.getText().length() > 0 &&
           lastNameField.getText().length() > 0 &&
           addressField.getText().length() > 0 &&
           phoneNumberField.getText().length() > 0;
  }
  
  private void cancelButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cancelButtonActionPerformed
    clear();
    PatronUseCases.getInstance().cancel();
    GUI.getInstance().goBack();
  }//GEN-LAST:event_cancelButtonActionPerformed
  
  private void phoneNumberFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_phoneNumberFieldCaretUpdate
    addPatronButton.setEnabled(isAddPatronEnabled());
  }//GEN-LAST:event_phoneNumberFieldCaretUpdate

  private void firstNameFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_firstNameFieldCaretUpdate
    addPatronButton.setEnabled(isAddPatronEnabled());
  }//GEN-LAST:event_firstNameFieldCaretUpdate

  private void lastNameFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_lastNameFieldCaretUpdate
    addPatronButton.setEnabled(isAddPatronEnabled());
  }//GEN-LAST:event_lastNameFieldCaretUpdate

  private void addressFieldCaretUpdate(javax.swing.event.CaretEvent evt) {//GEN-FIRST:event_addressFieldCaretUpdate
    addPatronButton.setEnabled(isAddPatronEnabled());
  }//GEN-LAST:event_addressFieldCaretUpdate

  private void addPatronButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_addPatronButtonActionPerformed
    try {
      String firstName = firstNameField.getText();
      String lastName = lastNameField.getText();
      String address = addressField.getText();
      String phoneNumber = phoneNumberField.getText();
      PatronUseCases.getInstance().addPatron(firstName, lastName, address, phoneNumber);
      GUI.getInstance().showMessage(firstName + " " + lastName + " has been added successfully!");
    } catch (IllegalArgumentException e) {
      GUI.getInstance().showMessage(e.getMessage());
    }
    clear();
  }//GEN-LAST:event_addPatronButtonActionPerformed

  private void addPatronButtonKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_addPatronButtonKeyPressed
    if (evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) {
      addPatronButtonActionPerformed(null);
    }
  }//GEN-LAST:event_addPatronButtonKeyPressed

  private void cancelButtonKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_cancelButtonKeyPressed
    if (evt.getKeyCode() == java.awt.event.KeyEvent.VK_ENTER) {
      cancelButtonActionPerformed(null);
    }
  }//GEN-LAST:event_cancelButtonKeyPressed

  /** Clears all fields in the card
   */
  private void clear() {
    firstNameField.setText("");
    lastNameField.setText("");
    addressField.setText("");
    phoneNumberField.setText("");
  }
  
  // Variables declaration - do not modify//GEN-BEGIN:variables
  private javax.swing.JButton addPatronButton;
  private javax.swing.JTextField addressField;
  private javax.swing.JLabel addressLabel;
  private javax.swing.JButton cancelButton;
  private javax.swing.JTextField firstNameField;
  private javax.swing.JLabel firstNameLabel;
  private javax.swing.JTextField lastNameField;
  private javax.swing.JLabel lastNameLabel;
  private javax.swing.JTextField phoneNumberField;
  private javax.swing.JLabel phoneNumberLabel;
  // End of variables declaration//GEN-END:variables
}
